# 以太坊（4）——权益证明与课程总结

# 权益证明

![image-20240519133346089](C:\Users\HUAWEI\AppData\Roaming\Typora\typora-user-images\image-20240519133346089.png)

上图是2018年（未使用PoS）时ETH的电力消耗

区块链挖矿消耗了很多的电能，拿现在ETH的挖矿耗电来说，消耗电能为0.0026亿千瓦时每年。

因此，很多人想到去避免挖矿这种行为，采用其他方法实现共识机制。

PoS（权益证明）在2022年正式实施

## Virtual mining

首先，我们分析PoW机制的本质，是由外部资金对于该区块链的投入程度决定的。（购买矿机，消耗电力都要外部投入）

因此，我们可以设计一个机制，按照现有该货币持有量来投票决定区块的合法性

## Virtual Mining思路的优势

1. 节省硬件成本，节约电力
2. 防止外界资本对于该货币的干扰
   1. 比如对于一个新兴货币的恶意攻击（AltCoin Infanticide），使得其安全性降低，货币资产缩水。这种攻击是一种在初期极为有效的手段，其一是因为初期挖矿算力低，容易掌握到51%算力；其二是因为上面一条原因攻击者需要投入的成本也很低
   2. 而我们使用类似于PoS的机制时，可以形成闭环的保护机制。如果你想攻击，就要购买大量的此类代币。当这类代笔被大量购入时：
      1. 其价格和受关注程度就会提高，参与挖矿的人增多，攻击就更难达成
      2. 开发者获得的收益增多，可以投入更多钱去开发
      3. 试图攻击者购买的代币升值，使得他们“毁链”的意愿降低

## Virtual Mining思路的问题

### 鼓励加入

一般PoS可以和PoW结合，占有货币量大的节点挖矿难度降低。这样可以解决后来参与者获得资金的问题（系统产出新的资产给新参与者），防止原有资本参与者会垄断整条链的使用和挖矿权，以及这条链的资金来源，哄抬币价。

### 强者恒强

由于上面一条的做法会导致拥有大量货币的节点挖出矿的概率更高，从而获得更多的币，达到强者恒强的效果。

为了应对这种方法，Virtual Mining采用了：使用一部分货币降低挖出一个区块的难度，当这个区块被挖出之后这些资金会被“冷冻”一段时间的想法。

### 两边下注

针对上面的“冷冻法”，可以采用两边下注的方法去应对：即在分叉的两边都投币降难度，成功的合法链就是成功的，失败了非法链的那部分资金由于挖的是非法链，不会被记录在案，自然也不会被冻结。这样的做法对于区块链的统一性造成了巨大打击。

#### FFG

一种想法是使用Casper the Friendly Finality Gadget(FFG)的方法应对

1. 节点可以投入一部分资金成为验证者（validator），验证者奖惩原则如下，按照要求投票在任期结束可以获得奖励；不进行投票在任期结束后扣除一部分保证金；乱投（比如两边下注）扣除所有保证金。扣除的资金会被销毁。

2. 每个验证者节点任期结束后会有一段“冷却期”，这样既可以使更多节点拥有参与验证的机会，避免了验证权被垄断。也可以在这个冷却期让其他节点对前任验证者进行查验和检举，处理押金和奖励的退还情况。

3. 投票采用一下的规则（epoch规则）

   1. 投票分为两个阶段。第一个阶段是预投票（Prepare Message），第二个阶段叫做确认投票（Commit Message）
   1. 每个阶段要有2/3以上节点同意才可通过，两个阶段都通过才可以确认合法性
   1. 投票的比例按照保证金的大小比例分配。

4. 实际投票采用下图所示的模式

   ![ad76e6690797f1a2f65a0840cf30569c_720](C:\Users\HUAWEI\Documents\Tencent Files\1016838361\nt_qq\nt_data\Pic\2024-05\Thumb\ad76e6690797f1a2f65a0840cf30569c_720.jpg)

   1. 100个区块被称为一个epoch
   2. ①②③分别为一次投票，每次投票可以看作是上50个区块的Commit Message，也可以看作是下50个区块的Prepare Message
   3. 两次投票都通过的即为被确认区块（可以类比BTC里面的6区块确认）

# 区块链的应用

很多对区块链所谓的质疑其实是应用不当或者理解不当导致的。

## 质疑

### 保险理赔场景

**原因不是支付技术的问题，而是审核是不是应该理赔的问题。**不是转不了帐，而是没法审核要不要转账。

### 溯源问题

将农产品的产业链的生产，运输等环节上链，可以实现溯源。

本质上和技术上没错，关键是**上链的数据不一定反应的就是实际的情况**。比如农产品运输时的调包，比如原产地其实喷农药等等。

### 网购

如何退款，如何质保？

比特币采用的是去中心化模式的**支付方式**，但是不意味着商业模式必须是去中心化的

#### 无法撤销

无法撤销自己的交易，也没法要求对方转回来。（这个BTC里面提到过，退款的本质还是再来一笔交易，而不是撤销上一笔交易），所谓退款或者转错账没法追回和区块链的不可篡改性无关，因为这**本质上是你没办法生成退款交易的问题**。

### 监管

监管是吧双刃剑，区块链避免了部分的监管（无法冻结），但是也没有了司法保护（比如盗刷）。

法侓上的保护和支付方式无关，只是某些法律选择了保护某种支付方式，而不是这些支付方式天然具有法律的保护性。这也是选择去中心化需要承担的风险。

而且，BTC本来就不是用来和已有的成熟支付方式竞争，比如你买瓶水要用BTC吗？明明现有的支付体系很完善的解决了这个问题，没必要用BTC来小事化大。

### 速度和环保

太慢了，不环保

1. BTC本来就不是用来和已有的成熟支付方式竞争
2. PoS以及ETH，侧链的发展，区块链的支付方式和能源消耗已经降低，而且是一种趋势（比如从BTC到ETH）
3. 判断一个支付手段的好坏，要放在特定的历史环境下去看。加密货币在某些应用场景下已经是很高效和很便宜的。

### 智能合约

看不懂，不智能！

程序化是一种趋势，智能合约产生时间还很短，之后会产生成熟的模板。

## 应用

### 现有支付体系解决的不是很好的场景

互联网解决了跨世界的信息交流的问题，但是跨世界的交易很麻烦（手续费贵，时间周期很长）

BTC可以解决支付方式的全球化，而且这种全球化可以和信息的交互联系在一起，融合价值交换和信息交换的新型网络。

## 进步

一项技术不一定是最好的，也不是无可挑剔的。但是它可能在某些方面是进步的，比如当时的互联网，又比如现在的区块链

不要跟风，区块链不是万能的，当然也不是一无是处的。不要因为某种方式是去中心化的就捧上天，也不要人云亦云，有自己理性的思考。

